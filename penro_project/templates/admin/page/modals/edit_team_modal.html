<!-- Edit Team Modal -->
<div class="modal fade" id="editTeamModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Edit Organizational Unit</h5>
        <button class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <form id="editTeamForm">
        {% csrf_token %}
        <input type="hidden" id="editTeamId" name="team_id">
        <div class="modal-body">
          <div class="mb-3">
            <label class="form-label">Unit Name</label>
            <input type="text" class="form-control" id="editTeamName" name="name" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Unit Type</label>
            <input type="text" class="form-control" id="editTeamType" readonly>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-primary">Save Changes</button>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
document.getElementById('editTeamForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  
  const formData = new FormData(e.target);
  
  try {
    const response = await fetch("{% url 'admin_app:edit-team' %}", {
      method: 'POST',
      body: formData,
      headers: {
        'X-Requested-With': 'XMLHttpRequest'
      }
    });
    
    if (response.ok) {
      bootstrap.Modal.getInstance(document.getElementById('editTeamModal')).hide();
      window.location.reload();
    } else {
      const data = await response.json();
      alert('Error: ' + (data.error || 'Failed to update team'));
    }
  } catch (error) {
    alert('Error: ' + error.message);
  }
});
</script>